{"ast":null,"code":"import _slicedToArray from\"/home/nameer/Projects/MEA_Radio/admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Table,Button}from'react-bootstrap';import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OfflineSlotRequests(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRows=_useState2[1];function fetchTable(){fetch(\"http://localhost:3000/api/admin/nonliveview\",{credentials:'include'}).then(function(res){return res.json();}).then(function(data){if(!data['error']){setRows(data);}console.log(data);}).catch(function(err){console.log(err);});}useEffect(function(){fetchTable();},[]);function approve(slot_uid){console.log(\"approval request for\",slot_uid);fetch(\"http://localhost:3000/api/admin/nonliveapprove\",{method:\"POST\",credentials:'include',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({slot_uid:slot_uid})}).then(function(res){return res.json();}).then(function(data){console.log(\"error:\",data);fetchTable();}).catch(function(err){console.log(err);});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{varient:\"primarty\",style:{padding:5},onClick:function onClick(){return fetchTable();},children:\" Reload\"}),/*#__PURE__*/_jsx(Table,{bordered:true,hover:true,size:\"sm\",responsive:true,children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Genre\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time Slot\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Clip\"})]}),rows&&rows.map(function(row,ind){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ind+1}),/*#__PURE__*/_jsx(\"td\",{children:row[\"email\"]}),/*#__PURE__*/_jsx(\"td\",{children:row[\"title\"]}),/*#__PURE__*/_jsx(\"td\",{children:row[\"note\"]}),/*#__PURE__*/_jsx(\"td\",{children:row[\"genre\"]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(row[\"date_from\"]).toString().replace(\"GMT+0530 (India Standard Time)\",\"\")+\" -> \"+new Date(row[\"date_to\"]).toString().replace(\"GMT+0530 (India Standard Time)\",\"\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"audio\",{src:\"http://localhost:3000/audio/\"+row['slot_uid']+'.mp3',controls:true})}),\" \",/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Button,{varient:\"secondary\",onClick:function onClick(){return approve(row[\"slot_uid\"]);}//here we use slot_uid to approve specific slot..but didnt shows on the table\n,children:\"Approve\"})})]});})]})})]});}","map":{"version":3,"sources":["/home/nameer/Projects/MEA_Radio/admin/src/components/OfflineSlotRequests/OfflineSlotRequests.jsx"],"names":["Table","Button","React","useState","useEffect","OfflineSlotRequests","rows","setRows","fetchTable","fetch","credentials","then","res","json","data","console","log","catch","err","approve","slot_uid","method","headers","body","JSON","stringify","padding","map","row","ind","Date","toString","replace"],"mappings":"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","sourcesContent":["import {Table,Button} from 'react-bootstrap'\nimport React,{useState,useEffect} from \"react\";\n\nexport default function OfflineSlotRequests() {\n  const [rows, setRows] = useState(null);\n  function fetchTable() {\n    fetch(\"http://localhost:3000/api/admin/nonliveview\", {\n      credentials:'include',\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        if (!data['error']) {\n          setRows(data);\n        }\n        \n        console.log(data);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n  useEffect(() => {\n    fetchTable();\n  }, []);\n\n  function approve(slot_uid) {\n    console.log(\"approval request for\", slot_uid);\n\n    \n    fetch(\"http://localhost:3000/api/admin/nonliveapprove\", {\n      method: \"POST\",\n      credentials:'include',\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ slot_uid }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(\"error:\", data);\n        fetchTable();\n      }).catch(err => {\n        console.log(err);\n      });\n  }\n  return (\n    <div>\n       <Button varient=\"primarty\" style={{padding:5}} onClick={()=>fetchTable()}> Reload</Button>\n      <Table bordered hover size=\"sm\" responsive>\n        <tbody>\n          <tr>\n            <th>#</th>\n            <th>Email</th>\n            <th>Title</th>\n            <th>Description</th>\n            <th>Genre</th>\n                      <th>Time Slot</th>\n                      <th>Clip</th>\n          </tr>\n\n          {rows &&(\n            rows.map((row, ind) => (\n              <tr>\n                <td>{ind + 1}</td>\n                <td>{row[\"email\"]}</td>\n                <td>{row[\"title\"]}</td>\n\n                <td>{row[\"note\"]}</td>\n                <td>{row[\"genre\"]}</td>\n                <td>\n                  {new Date(row[\"date_from\"])\n                    .toString()\n                    .replace(\"GMT+0530 (India Standard Time)\", \"\") +\n                    \" -> \" +\n                    new Date(row[\"date_to\"])\n                      .toString()\n                      .replace(\"GMT+0530 (India Standard Time)\", \"\")}\n                </td>\n                <td><audio src={\"http://localhost:3000/audio/\"+row['slot_uid']+'.mp3'} controls></audio></td> {/* here we can append slotid with server ip..since we know the src will be same slotid*/}\n                \n                <td>\n                  <Button\n                    varient=\"secondary\"\n                    onClick={() => approve(row[\"slot_uid\"])} //here we use slot_uid to approve specific slot..but didnt shows on the table\n                  >\n                    Approve\n                  </Button>\n                </td>\n              </tr>\n            )))}\n        </tbody>\n      </Table>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}