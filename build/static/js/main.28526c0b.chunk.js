(this.webpackJsonpadmin=this.webpackJsonpadmin||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),r=n(9),o=n.n(r),s=(n(40),n(6)),l=(n.p,n(41),n(52)),d=n(56),a=n(53),j=(n(42),n(1));function h(e){var t=Object(c.useState)(""),n=Object(s.a)(t,2),i=n[0],r=n[1],o=Object(c.useState)(""),h=Object(s.a)(o,2),b=h[0],u=h[1];return document.cookie="JWT=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"MEA Radio Admin Panel"}),Object(j.jsx)(l.a,{className:"Login",children:Object(j.jsxs)(d.a,{style:{marginTop:"10%",border:"2px solid black",padding:"10px"},onSubmit:function(t){t.preventDefault(),fetch("http://35.200.150.147:3000/api/admin/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:b,email:i})}).then((function(e){return e.json()})).then((function(t){t.error||e.setLogin(!0)}))},children:[Object(j.jsxs)(d.a.Group,{controlId:"formBasicEmail",children:[Object(j.jsx)(d.a.Label,{children:"Email address"}),Object(j.jsx)(d.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return r(e.target.value)}})]}),Object(j.jsxs)(d.a.Group,{controlId:"formBasicPassword",children:[Object(j.jsx)(d.a.Label,{children:"Password"}),Object(j.jsx)(d.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)}})]}),Object(j.jsx)(a.a,{variant:"primary",type:"submit",style:{marginTop:"10px"},disabled:!(i.length>0&&b.length>0),children:"Login"})]})})]})}var b=n(58),u=n(57),O=n(55),x=n(54);function p(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)({}),o=Object(s.a)(r,2);o[0],o[1];function l(){fetch("http://localhost:3000/api/admin/bookslotview",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){i(e),console.log(e)})).catch((function(e){console.log(e)}))}return Object(c.useEffect)((function(){l()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(a.a,{varient:"primarty",style:{padding:5},onClick:function(){return l()},children:" Reload"}),Object(j.jsx)(x.a,{bordered:!0,hover:!0,size:"sm",responsive:!0,children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Genre"}),Object(j.jsx)("th",{children:"Time Slot"}),Object(j.jsx)("th",{children:"No of Members"}),Object(j.jsx)("th",{children:"Members"})]}),n&&n.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.email}),Object(j.jsx)("td",{children:e.title}),Object(j.jsx)("td",{children:e.note}),Object(j.jsx)("td",{children:e.genre}),Object(j.jsx)("td",{children:new Date(e.date_from).toString().replace("GMT+0530 (India Standard Time)","")+" -> "+new Date(e.date_to).toString().replace("GMT+0530 (India Standard Time)","")}),Object(j.jsx)("td",{children:e.no_of_members}),Object(j.jsx)("td",{children:e.no_of_members>1?e.members.map((function(e){return e}))+"":"NULL"}),Object(j.jsx)("td",{children:Object(j.jsx)(a.a,{varient:"secondary",onClick:function(){return t=e.slot_uid,console.log("approval request for",t),void fetch("http://localhost:3000/api/admin/bookslotapprove",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot_uid:t})}).then((function(e){return e.json()})).then((function(e){console.log("error",e),l()}));var t},children:"Approve"})})]})}))]})})]})}function f(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1];function r(){fetch("http://localhost:3000/api/admin/nonliveview",{credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.error||i(e),console.log(e)})).catch((function(e){console.log(e)}))}return Object(c.useEffect)((function(){r()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(a.a,{varient:"primarty",style:{padding:5},onClick:function(){return r()},children:" Reload"}),Object(j.jsx)(x.a,{bordered:!0,hover:!0,size:"sm",responsive:!0,children:Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Genre"}),Object(j.jsx)("th",{children:"Time Slot"}),Object(j.jsx)("th",{children:"Clip"})]}),n&&n.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.email}),Object(j.jsx)("td",{children:e.title}),Object(j.jsx)("td",{children:e.note}),Object(j.jsx)("td",{children:e.genre}),Object(j.jsx)("td",{children:new Date(e.date_from).toString().replace("GMT+0530 (India Standard Time)","")+" -> "+new Date(e.date_to).toString().replace("GMT+0530 (India Standard Time)","")}),Object(j.jsx)("td",{children:Object(j.jsx)("audio",{src:"http://localhost:3000/audio/"+e.slot_uid+".mp3",controls:!0})})," ",Object(j.jsx)("td",{children:Object(j.jsx)(a.a,{varient:"secondary",onClick:function(){return t=e.slot_uid,console.log("approval request for",t),void fetch("http://localhost:3000/api/admin/nonliveapprove",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot_uid:t})}).then((function(e){return e.json()})).then((function(e){console.log("error:",e),r()})).catch((function(e){console.log(e)}));var t},children:"Approve"})})]})}))]})})]})}function m(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useRef)();return Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"file",id:"file",multiple:!0,name:"file",onChange:function(e){i(e.target.files)}}),Object(j.jsx)("button",{type:"submit",className:"btn btn-info",onClick:function(){if(n.length>0)if(console.log(n),r.current!==n){for(var e=new FormData,t=0;t<n.length;t++)e.append("files",n[t]);fetch("http://localhost:3000/api/admin/updateradioloop",{method:"POST",credentials:"include",body:e}),r.current=n}else alert("select different files");else alert("select atleast One file")},children:" Update Loop "})]})}var g=n(31),v=n.n(g),y=n(20),S=n(32),T=n(33);function C(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(null),o=Object(s.a)(r,2),l=o[0],d=o[1],h=Object(c.useRef)(null),b=Object(c.useState)({}),u=Object(s.a)(b,2),O=u[0],p=u[1];function f(){fetch("http://localhost:3000/api/admin/getavailableshows").then((function(e){return e.json()})).then((function(e){e.length>0?i(e):i(null)})).catch((function(e){}))}function m(){fetch("http://localhost:3000/api/admin/getcurrentshow").then((function(e){return e.json()})).then((function(e){e.length>0&&d(e)})).catch((function(e){console.log(e)}))}function g(){return(g=Object(T.a)(v.a.mark((function e(t){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("add show request for:",t),n=new FormData,e.next=4,fetch(O[t]).then((function(e){return e.blob()}));case 4:c=e.sent,n.append("thumbnail",c,t),fetch("http://localhost:3000/api/admin/addtoshow",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){console.log("error:",e),f()})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){f(),m()}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)(a.a,{varient:"primarty",style:{padding:5},onClick:function(){return f()},children:" Reload"}),Object(j.jsxs)(x.a,{bordered:!0,hover:!0,size:"sm",responsive:!0,children:[Object(j.jsx)("h4",{style:{textAlign:"center"},children:"Available Shows"}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Genre"}),Object(j.jsx)("th",{children:"Clip"})]}),n&&n.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.email}),Object(j.jsx)("td",{children:e.title}),Object(j.jsx)("td",{children:e.note}),Object(j.jsx)("td",{children:e.genre}),Object(j.jsx)("td",{children:Object(j.jsx)("audio",{src:"http://localhost:3000/audio/"+e.slot_uid+".mp3",controls:!0})}),Object(j.jsxs)("td",{children:[Object(j.jsx)("input",{type:"file",id:"file",ref:h,style:{display:"none"},onChange:function(t){return function(e,t){p(Object(S.a)(Object(S.a)({},O),{},Object(y.a)({},t,URL.createObjectURL(e.target.files[0])))),console.log(O)}(t,e.slot_uid)}}),Object(j.jsxs)(a.a,{varient:"secondary",onClick:function(){return h.current.click()},children:[" ","Add Thumbnail"]})]}),Object(j.jsx)("td",{children:Object(j.jsx)(a.a,{varient:"secondary",onClick:function(){return function(e){return g.apply(this,arguments)}(e.slot_uid)},children:"Add To Show"})}),Object(j.jsx)("td",{children:Object(j.jsx)(a.a,{varient:"secondary",onClick:function(){return t=e.slot_uid,void fetch("http://localhost:3000/api/admin/removerecording",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot_uid:t})}).then((function(e){return f()})).catch((function(e){return console.log(e)}));var t},children:"Remove"})}),O&&Object(j.jsx)("td",{children:Object(j.jsx)("img",{src:O[e.slot_uid],alt:"",width:"350",height:"200"})})]})}))]})]},"RC"),Object(j.jsx)(a.a,{varient:"primarty",style:{padding:5},onClick:function(){return m()},children:" Reload"}),Object(j.jsxs)(x.a,{bordered:!0,hover:!0,size:"sm",responsive:!0,children:[Object(j.jsx)("h4",{style:{textAlign:"center"},children:"Current Shows"}),Object(j.jsxs)("tbody",{children:[Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"#"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Title"}),Object(j.jsx)("th",{children:"Description"}),Object(j.jsx)("th",{children:"Genre"}),Object(j.jsx)("th",{children:"Likes"})]}),l&&l.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:e.email}),Object(j.jsx)("td",{children:e.title}),Object(j.jsx)("td",{children:e.note}),Object(j.jsx)("td",{children:e.genre}),Object(j.jsx)("td",{children:e.likes}),Object(j.jsx)("td",{children:Object(j.jsx)(a.a,{varient:"secondary",onClick:function(){return t=e.slot_uid,fetch("http://localhost:3000/api/admin/removeshow",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot_uid:t})}),void m();var t},children:"Remove"})})]})}))]})]},"RC")]})}function w(e){var t=Object(c.useState)("slot_req"),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(j.jsxs)("div",{children:[Object(j.jsxs)(b.a,{bg:"dark",variant:"dark",children:[Object(j.jsx)(b.a.Brand,{children:"MEA Radio Admin Panel"}),Object(j.jsx)(a.a,{variant:"outline-info",style:{position:"absolute",right:10},onClick:function(){console.log("logging out"),document.cookie="JWT=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",e.setLogin(!1)},children:"Log Out"})]}),Object(j.jsxs)(u.a,{id:"controlled-tab-example",activeKey:i,onSelect:function(e){return r(e)},children:[Object(j.jsx)(O.a,{eventKey:"live_slot_req",title:"Live Slot Requests",children:Object(j.jsx)(p,{})}),Object(j.jsx)(O.a,{eventKey:"offline_slot_req",title:"Offline Slot Requests",children:Object(j.jsx)(f,{})}),Object(j.jsx)(O.a,{eventKey:"playlist",title:"Shows Updation",children:Object(j.jsx)(C,{})}),Object(j.jsx)(O.a,{eventKey:"loop",title:"Radio Loop",children:Object(j.jsx)(m,{})})]})]})}n(49);var _=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(j.jsx)("div",{className:"App",children:n?Object(j.jsx)(w,{isLoggedIn:n,setLogin:i}):Object(j.jsx)(h,{isLoggedIn:n,setLogin:i})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),r(e),o(e)}))};o.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(_,{})}),document.getElementById("root")),k()}},[[50,1,2]]]);
//# sourceMappingURL=main.28526c0b.chunk.js.map